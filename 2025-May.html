<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>2025 May Memories</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
    <a href="index.html" class="back-button">← back</a>
    <h1 class="month-title">2025 May Memories</h1>

    <!-- 日曆格子 -->
  <div class="calendar-wrapper">
    <div class="calendar-grid">
      <!-- 一行 7 個格子，不加 blank -->
      <div class="day empty"><div class="date-label"></div><div class="detail"></div></div>
      <div class="day empty"><div class="date-label"></div><div class="detail"></div></div>
      <div class="day empty"><div class="date-label"></div><div class="detail"></div></div>
      <div class="day wd" onclick="openMemo('2025-05-01')">
        <div class="date-label">1</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-02')">
        <div class="date-label">2</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-03')">
        <div class="date-label">3</div>
        <div class="detail">淡水＆觀景</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-04')">
        <div class="date-label">4</div>
        <div class="detail">美術館＆蕭煌奇</div>
      </div>
      <!-- 一行 7 個格子，不加 blank -->
      <div class="day wd" onclick="openMemo('2025-05-05')">
        <div class="date-label">5</div>
        <div class="detail">正式在一起💘</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-06')">
        <div class="date-label">6</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-07')">
        <div class="date-label">7</div>
        <div class="detail">宏匯晚餐</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-08')">
        <div class="date-label">8</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-09')">
        <div class="date-label">9</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-10')">
        <div class="date-label">10</div>
        <div class="detail">板橋蝶戀季</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-11')">
        <div class="date-label">11</div>
        <div class="detail"></div>
      </div>
      <!-- 一行 7 個格子，不加 blank -->
      <div class="day wd" onclick="openMemo('2025-05-12')">
        <div class="date-label">12</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-13')">
        <div class="date-label">13</div>
        <div class="detail">拉麵＆公園</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-14')">
        <div class="date-label">14</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-15')">
        <div class="date-label">15</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-16')">
        <div class="date-label">16</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-17')">
        <div class="date-label">17</div>
        <div class="detail">組長請桃園海鮮餐廳</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-18')">
        <div class="date-label">18</div>
        <div class="detail">基隆晚餐</div>
      </div>
      <!-- 一行 7 個格子，不加 blank -->
      <div class="day wd" onclick="openMemo('2025-05-19')">
        <div class="date-label">19</div>
        <div class="detail">宵夜一起</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-20')">
        <div class="date-label">20</div>
        <div class="detail">電影：特攻隊</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-21')">
        <div class="date-label">21</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-22')">
        <div class="date-label">22</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-23')">
        <div class="date-label">23</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-24')">
        <div class="date-label">24</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-25')">
        <div class="date-label">25</div>
        <div class="detail"></div>
      </div>
      <!-- 一行 7 個格子，不加 blank -->
      <div class="day wd" onclick="openMemo('2025-05-26')">
        <div class="date-label">26</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-27')">
        <div class="date-label">27</div>
        <div class="detail">電影：絕命終結站</div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-28')">
        <div class="date-label">28</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-29')">
        <div class="date-label">29</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-30')">
        <div class="date-label">30</div>
        <div class="detail"></div>
      </div>
      <div class="day wd" onclick="openMemo('2025-05-31')">
        <div class="date-label">31</div>
        <div class="detail">宵夜</div>
      </div>
      </div>
    </div>
  </div>
    <footer>一起走過的美好日子 ❤️</footer>
  <!-- Memo 寫日記視窗 -->
  <div id="memo-entry" class="memo-card">
    <div class="memo-content">
      <h3 id="memo-title">📝 回憶日記</h3>

      <!-- 📌 留言列表放在這裡，輸入區之上 -->
      <div id="memo-list" class="memo-list"></div>

      <!-- ✍️ 輸入區 -->
      <textarea id="memo-text" placeholder="寫下今天的回憶..."></textarea>
      <input type="password" id="memo-password" placeholder="密碼"/>
      <button onclick="submitMemo()" class="back-button submit">送出</button>

      <button onclick="closeMemoEntry()" class="back-button home">← 回首頁</button>
    </div>
  </div>
  <!-- JS開關memo -->
  <script>
    let currentDate = "";

    function openMemo(dateId) {
      currentDate = dateId;
      document.getElementById("memo-title").textContent = `📝 ${dateId} 的留言板`;
      document.getElementById("memo-entry").style.display = "flex";
      loadMemos();
    }

    function closeMemoEntry() {
      document.getElementById("memo-entry").style.display = "none";
      document.getElementById("memo-text").value = "";
      document.getElementById("memo-password").value = "";
      document.getElementById("memo-list").innerHTML = "";
    }

    function submitMemo() {
      const text = document.getElementById("memo-text").value.trim();
      const password = document.getElementById("memo-password").value;
      if (password !== "3" || text.length === 0) return alert("請輸入密碼與內容");

      const memos = JSON.parse(localStorage.getItem("memo_" + currentDate) || "[]");
      memos.push(text);
      localStorage.setItem("memo_" + currentDate, JSON.stringify(memos));
      document.getElementById("memo-text").value = "";
      loadMemos();
    }

    function loadMemos() {
      const list = document.getElementById("memo-list");
      const memos = JSON.parse(localStorage.getItem("memo_" + currentDate) || "[]");
      list.innerHTML = "";

      memos.forEach((msg, index) => {
        const item = document.createElement("div");
        item.className = "memo-item";

        item.innerHTML = `
          <div class="memo-actions">
            <button onclick="startEdit(${index})" class="edit-btn">✏️</button>
            <div class="memo-text" id="memo-text-${index}">${msg}</div>
            <button onclick="confirmDelete(${index})" class="delete-btn">🗑</button>
          </div>
        `;
        
        list.appendChild(item);
      });
    }
    function startEdit(index) {
      const memos = JSON.parse(localStorage.getItem("memo_" + currentDate) || "[]");
      const currentText = memos[index];
      const textDiv = document.getElementById(`memo-text-${index}`);

      textDiv.innerHTML = `
        <textarea id="edit-input-${index}" class="edit-box">${currentText}</textarea>
        <button onclick="applyEdit(${index})">儲存</button>
      `;
    }

    function applyEdit(index) {
      const memos = JSON.parse(localStorage.getItem("memo_" + currentDate) || "[]");
      const newText = document.getElementById(`edit-input-${index}`).value.trim();
      if (newText.length === 0) return alert("請勿儲存空內容");

      memos[index] = newText;
      localStorage.setItem("memo_" + currentDate, JSON.stringify(memos));
      loadMemos();
    }
    function deleteMemo(index) {
      const memos = JSON.parse(localStorage.getItem("memo_" + currentDate) || "[]");
      memos.splice(index, 1);
      localStorage.setItem("memo_" + currentDate, JSON.stringify(memos));
      loadMemos();
    }
    function confirmDelete(index) {
      const ok = confirm("確定要刪除這則留言嗎？");
      if (ok) deleteMemo(index);
    }
  </script>
</body>
</html>